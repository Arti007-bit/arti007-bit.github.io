<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8" />
<title>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§</title>
<style>
body { 
  font-family: "Vazir", sans-serif;
  direction: rtl;
  margin: 40px;
  background: #fafafa;
}
h1 { color: #333; }
table { width: 100%; border-collapse: collapse; margin-top: 20px; background: #fff; }
th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
button { cursor: pointer; padding: 4px 8px; margin: 0 3px; }
#clear-cart {
  background: #d33;
  color: #fff;
  border: none;
  padding: 10px 15px;
  margin-top: 15px;
  border-radius: 5px;
  cursor: pointer;
}
#clear-cart:hover { background: #b22; }
.total { font-weight: bold; color: green; margin-top: 20px; }
a { text-decoration: none; color: #007bff; }
</style>
</head>
<body>
<h1>ğŸ›’ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§</h1>

<table id="cart-table">
  <thead>
    <tr>
      <th>Ù†Ø§Ù… Ù…Ø­ØµÙˆÙ„</th>
      <th>Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯</th>
      <th>ØªØ¹Ø¯Ø§Ø¯</th>
      <th>Ø¬Ù…Ø¹ Ú©Ù„</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<p class="total"></p>

<button id="clear-cart">ğŸ—‘ï¸ Ø®Ø§Ù„ÛŒ Ú©Ø±Ø¯Ù† Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</button>
<br><br>
<a href="index.html">â¬…ï¸ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</a>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  const tbody = document.querySelector("#cart-table tbody");
  const totalElement = document.querySelector(".total");
  const clearBtn = document.getElementById("clear-cart");
  tbody.innerHTML = "";
  let total = 0;

  // Ø§Ú¯Ø± Ø³Ø¨Ø¯ Ø®Ø§Ù„ÛŒ Ø¨ÙˆØ¯
  if (cart.length === 0) {
    tbody.innerHTML = `<tr><td colspan="4">Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª ğŸ›’</td></tr>`;
    totalElement.innerText = "";
    clearBtn.style.display = "none";
    return;
  }

  // Ù†Ù…Ø§ÛŒØ´ Ø§Ù‚Ù„Ø§Ù… Ø³Ø¨Ø¯
  cart.forEach((item, index) => {
    const subtotal = item.price * item.quantity;
    total += subtotal;

    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${item.name}</td>
      <td>${item.price.toLocaleString()} ØªÙˆÙ…Ø§Ù†</td>
      <td>
        <button class="dec">-</button>
        ${item.quantity}
        <button class="inc">+</button>
      </td>
      <td>${subtotal.toLocaleString()} ØªÙˆÙ…Ø§Ù†</td>
    `;
    tbody.appendChild(tr);

    // Ø§ÙØ²Ø§ÛŒØ´ ÛŒØ§ Ú©Ø§Ù‡Ø´ ØªØ¹Ø¯Ø§Ø¯
    tr.querySelector(".inc").addEventListener("click", () => {
      item.quantity++;
      localStorage.setItem("cart", JSON.stringify(cart));
      location.reload();
    });

    tr.querySelector(".dec").addEventListener("click", () => {
      if (item.quantity > 1) item.quantity--;
      else cart.splice(index, 1);
      localStorage.setItem("cart", JSON.stringify(cart));
      location.reload();
    });
  });

  totalElement.innerText = `ğŸ’° Ù…Ø¬Ù…ÙˆØ¹ Ú©Ù„: ${total.toLocaleString()} ØªÙˆÙ…Ø§Ù†`;

  // Ø¯Ú©Ù…Ù‡ Ø®Ø§Ù„ÛŒ Ú©Ø±Ø¯Ù† Ø³Ø¨Ø¯
  clearBtn.addEventListener("click", () => {
    if (confirm("Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø±Ø§ Ø®Ø§Ù„ÛŒ Ú©Ù†ÛŒØ¯ØŸ")) {
      localStorage.removeItem("cart");
      location.reload();
    }
  });
});
</script>
</body>
</html>
