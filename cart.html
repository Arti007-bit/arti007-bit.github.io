<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8" />
<title>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§</title>
<style>
body { 
  font-family: "Vazir", sans-serif;
  direction: rtl;
  margin: 40px;
  background: #fafafa;
}
h1 { color: #333; }
table { width: 100%; border-collapse: collapse; margin-top: 20px; background: #fff; }
th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
button { cursor: pointer; padding: 4px 8px; margin: 0 3px; }
#clear-cart {
  background: #d33;
  color: #fff;
  border: none;
  padding: 10px 15px;
  margin-top: 15px;
  border-radius: 5px;
  cursor: pointer;
}
#clear-cart:hover { background: #b22; }
.total { font-weight: bold; color: green; margin-top: 20px; }
a { text-decoration: none; color: #007bff; }
</style>
</head>
<body>
  <div class="cart-container">
  <h2>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§</h2>
  </button>
    <a href="checkout.html" class="finalize-cart">Ù†Ù‡Ø§ÛŒÛŒ Ú©Ø±Ø¯Ù† Ø®Ø±ÛŒØ¯</a>
</div>
<script>
  function finalizeCart() {
    // ÙˆÙ‚ØªÛŒ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ú©Ù„ÛŒÚ© Ø´Ø¯ Ø§ÛŒÙ† Ú©Ø¯ Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´Ù‡
    alert("Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ù‡ ØµÙØ­Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ù‡Ø§ÛŒÛŒ...");
    // Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ù‡ ØµÙØ­Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª
    window.location.href = "checkout.html";
  }
</script>

<style>
  .checkout-btn {
    background-color: #28a745; /* Ø³Ø¨Ø² Ø²ÛŒØ¨Ø§ */
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    font-size: 16px;
    cursor: pointer;
    margin-top: 15px;
  }
  .checkout-btn:hover {
    background-color: #218838;
  }
</style>

<h1>ğŸ›’ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§</h1>

<table id="cart-table">
  <thead>
    <tr>
      <th>Ù†Ø§Ù… Ù…Ø­ØµÙˆÙ„</th>
      <th>Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯</th>
      <th>ØªØ¹Ø¯Ø§Ø¯</th>
      <th>Ø¬Ù…Ø¹ Ú©Ù„</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<p class="total"></p>

<button id="clear-cart">ğŸ—‘ï¸ Ø®Ø§Ù„ÛŒ Ú©Ø±Ø¯Ù† Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</button>
<br><br>
<a href="index.html">â¬…ï¸ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</a>

<script>
document.addEventListener("DOMContentLoaded", () => {
  // Ø®ÙˆØ§Ù†Ø¯Ù† Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø² localStorage
  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  const tbody = document.querySelector("#cart-table tbody");
  const totalElement = document.querySelector(".total");
  const clearBtn = document.getElementById("clear-cart");

  tbody.innerHTML = "";
  let total = 0;

  // Ø§Ú¯Ø± Ø³Ø¨Ø¯ Ø®Ø§Ù„ÛŒ Ø¨ÙˆØ¯
  if (cart.length === 0) {
    tbody.innerHTML = `<tr><td colspan="4">Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª ğŸ›’</td></tr>`;
    totalElement.innerText = "";
    clearBtn.style.display = "none";
    return;
  }

  // Ù†Ù…Ø§ÛŒØ´ Ø§Ù‚Ù„Ø§Ù… Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯
  cart.forEach((item, index) => {
    const name = item.name || "Ø¨Ø¯ÙˆÙ† Ù†Ø§Ù…";
    const price = Number(item.price) || 0;
    const quantity = Number(item.quantity) || 1;
    const subtotal = price * quantity;
    total += subtotal;

    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${name}</td>
      <td>${price.toLocaleString()} ØªÙˆÙ…Ø§Ù†</td>
      <td>
        <button class="dec">-</button>
        ${quantity}
        <button class="inc">+</button>
      </td>
      <td>${subtotal.toLocaleString()} ØªÙˆÙ…Ø§Ù†</td>
    `;
    tbody.appendChild(tr);

    // Ø§ÙØ²Ø§ÛŒØ´ ØªØ¹Ø¯Ø§Ø¯
    tr.querySelector(".inc").addEventListener("click", () => {
      item.quantity = quantity + 1;
      localStorage.setItem("cart", JSON.stringify(cart));
      location.reload();
    });

    // Ú©Ø§Ù‡Ø´ ØªØ¹Ø¯Ø§Ø¯ ÛŒØ§ Ø­Ø°Ù Ú©Ø§Ù„Ø§
    tr.querySelector(".dec").addEventListener("click", () => {
      if (quantity > 1) {
        item.quantity = quantity - 1;
      } else {
        cart.splice(index, 1);
      }
      localStorage.setItem("cart", JSON.stringify(cart));
      location.reload();
    });
  });

  // Ù…Ø¬Ù…ÙˆØ¹ Ú©Ù„
  totalElement.innerText = `ğŸ’° Ù…Ø¬Ù…ÙˆØ¹ Ú©Ù„: ${total.toLocaleString()} ØªÙˆÙ…Ø§Ù†`;

  // Ø®Ø§Ù„ÛŒ Ú©Ø±Ø¯Ù† Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯
  clearBtn.addEventListener("click", () => {
    if (confirm("Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø±Ø§ Ø®Ø§Ù„ÛŒ Ú©Ù†ÛŒØ¯ØŸ")) {
      localStorage.removeItem("cart");
      location.reload();
    }
  });
});
</script>
</body>
</html>
